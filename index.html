<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Elizabeth, Be My Valentine? ğŸ’›</title>

<style>
body {
  margin: 0;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: linear-gradient(135deg, #ff9a9e, #fad0c4);
  font-family: Arial, sans-serif;
  text-align: center;
  overflow: hidden;
}

.container {
  background: white;
  padding: 35px;
  border-radius: 20px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
  position: relative;
  z-index: 2;
  max-width: 360px;
}

img.main-gif {
  width: 220px;
  border-radius: 15px;
  margin-bottom: 15px;
}

button {
  padding: 15px 28px;
  font-size: 18px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  margin: 10px;
  transition: all 0.3s ease;
}

#yesBtn {
  background-color: #ff4d6d;
  color: white;
}

#noBtn {
  background-color: #6c757d;
  color: white;
  position: relative;
}

#noBtn.runaway {
  position: fixed;
  z-index: 3;
}

/* Fireworks canvas */
#fireworks {
  position: fixed;
  inset: 0;
  display: none;
  z-index: 0;
}

/* Hidden music iframe */
#musicPlayer {
  position: fixed;
  width: 0;
  height: 0;
  border: 0;
}
</style>
</head>

<body>

<!-- Background Music -->
<iframe
  id="musicPlayer"
  src="https://www.youtube.com/embed/9uQk8GQ0V9Y?autoplay=1&mute=1&loop=1&playlist=9uQk8GQ0V9Y"
  allow="autoplay">
</iframe>

<canvas id="fireworks"></canvas>

<div class="container" id="mainBox">
  <h1>Elizabeth, will you be my Valentine? ğŸ’˜</h1>

  <!-- MAIN GIF (Option 1) -->
  <img class="main-gif" src="IMG_7130.gif" alt="Minion in the woods">

  <div>
    <button id="yesBtn">Yes ğŸ’–</button>
    <button id="noBtn">No ğŸ™ˆ</button>
  </div>
</div>

<script>
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const mainBox = document.getElementById("mainBox");
const musicPlayer = document.getElementById("musicPlayer");

let yesSize = 18;
let noClicks = 0;

/* ---- NO BUTTON LOGIC ---- */
noBtn.addEventListener("click", () => {
  noClicks++;

  // Grow YES button
  yesSize += 8;
  yesBtn.style.fontSize = yesSize + "px";
  yesBtn.style.padding = yesSize + "px " + (yesSize * 2) + "px";

  const messages = [
    "Are you sure? ğŸ˜¢",
    "Really sure? ğŸ¥º",
    "Think again ğŸ’”",
    "Last chance ğŸ˜­",
    "Okay now you're just teasing ğŸ˜…"
  ];

  if (noClicks <= messages.length) {
    noBtn.textContent = messages[noClicks - 1];
  }

  if (noClicks === 5) {
    noBtn.classList.add("runaway");
    moveNoButton();
  }
});

/* Mobile + desktop runaway support */
function moveNoButton() {
  const btnRect = noBtn.getBoundingClientRect();
  const padding = 20;

  const maxX = window.innerWidth - btnRect.width - padding;
  const maxY = window.innerHeight - btnRect.height - padding;

  const x = Math.random() * maxX;
  const y = Math.random() * maxY;

  noBtn.style.left = x + "px";
  noBtn.style.top = y + "px";
}

document.addEventListener("mousemove", (e) => {
  if (!noBtn.classList.contains("runaway")) return;

  const rect = noBtn.getBoundingClientRect();
  const distance = Math.hypot(
    e.clientX - (rect.left + rect.width / 2),
    e.clientY - (rect.top + rect.height / 2)
  );

  if (distance < 120) moveNoButton();
});

document.addEventListener("touchstart", () => {
  if (noBtn.classList.contains("runaway")) moveNoButton();
});

/* ---- YES BUTTON ---- */
yesBtn.addEventListener("click", () => {
  // Unmute music after interaction (Safari-safe)
  musicPlayer.src = musicPlayer.src.replace("mute=1", "mute=0");

  startFireworks();

  mainBox.innerHTML = `
    <h1>YAY ELIZABETH!!! â¤ï¸ğŸ¥°</h1>
    <p>You just made my whole day ğŸ’•</p>
    <a href="sms:6304498464?body=Yes%20I%20will%20be%20your%20Valentine%20â¤ï¸">
      <button style="font-size:22px; background:#ff4d6d; color:white;">
        Send Text ğŸ’Œ
      </button>
    </a>
  `;
});

/* ---- FIREWORKS ---- */
function startFireworks() {
  const canvas = document.getElementById("fireworks");
  canvas.style.display = "block";
  const ctx = canvas.getContext("2d");

  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  let particles = [];

  function createFirework() {
    const x = Math.random() * canvas.width;
    const y = Math.random() * canvas.height * 0.5;

    for (let i = 0; i < 40; i++) {
      particles.push({
        x,
        y,
        angle: Math.random() * Math.PI * 2,
        speed: Math.random() * 4 + 2,
        radius: 2,
        life: 60
      });
    }
  }

  function animate() {
    ctx.fillStyle = "rgba(255,192,203,0.15)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    particles = particles.filter(p => p.life > 0);

    particles.forEach(p => {
      p.x += Math.cos(p.angle) * p.speed;
      p.y += Math.sin(p.angle) * p.speed;
      p.speed *= 0.95;
      p.life--;

      ctx.beginPath();
      ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
      ctx.fillStyle = `hsl(${Math.random()*360},100%,60%)`;
      ctx.fill();
    });

    requestAnimationFrame(animate);
  }

  setInterval(createFirework, 700);
  animate();
}
</script>

</body>
</html>
